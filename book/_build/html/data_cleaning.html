

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Data cleaning by example &#8212; Data science and AI for Bio/medical applications using python</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=bd9e20870c6007c4c509" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=bd9e20870c6007c4c509"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'data_cleaning';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Exploratory data analysis" href="EDA.html" />
    <link rel="prev" title="Virtual Environments" href="virtual_environments.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <header>
  
    <div class="bd-header navbar navbar-expand-lg bd-navbar">
    </div>
  
  </header>

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/dasl.png" class="logo__image only-light" alt="Data science and AI for Bio/medical applications using python - Home"/>
    <script>document.write(`<img src="_static/dasl.png" class="logo__image only-dark" alt="Data science and AI for Bio/medical applications using python - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome!
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="git.html">Git, github</a></li>
<li class="toctree-l1"><a class="reference internal" href="ds_python.html">Python background</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_python.html">Python basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_programming.html">Python programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_practice.html">Python in practice</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtual_environments.html">Virtual Environments</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Data cleaning by example</a></li>


<li class="toctree-l1"><a class="reference internal" href="EDA.html">Exploratory data analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="sqlite.html">SQL via sqlite</a></li>
<li class="toctree-l1"><a class="reference internal" href="pysqlite.html">sqlite in python</a></li>
<li class="toctree-l1"><a class="reference internal" href="rBasic.html">Base R</a></li>
<li class="toctree-l1"><a class="reference internal" href="rTidyverse.html">R tidyverse quick example</a></li>
<li class="toctree-l1"><a class="reference internal" href="rFromPython.html">R from python</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_structures.html">Data structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="pythonFromR.html">Python from R</a></li>
<li class="toctree-l1"><a class="reference internal" href="html.html">HTML, CSS and javascript</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive.html">Interactive graphics</a></li>
<li class="toctree-l1"><a class="reference internal" href="webscraping.html">Webscraping</a></li>
<li class="toctree-l1"><a class="reference internal" href="streamlit.html">Streamlit</a></li>
<li class="toctree-l1"><a class="reference internal" href="dash.html">Dash</a></li>
<li class="toctree-l1"><a class="reference internal" href="dash2.html">Dash callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="voila.html">Jupyterwidgets and voila</a></li>
<li class="toctree-l1"><a class="reference internal" href="binary_classification.html">Introduction to binary classification</a></li>

<li class="toctree-l1"><a class="reference internal" href="regression_through_the_origin.html">Regression through the origin</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression.html">Continuous prediction with regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="numpy.html">Numpy</a></li>
<li class="toctree-l1"><a class="reference internal" href="logistic.html">Logistic regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml.html">Maximum Likelihood</a></li>
<li class="toctree-l1"><a class="reference internal" href="linearSeparable.html">Linear separable models</a></li>
<li class="toctree-l1"><a class="reference internal" href="linearSeparableSMF.html">Interpretation of linear regression coefficients.</a></li>
<li class="toctree-l1"><a class="reference internal" href="dft.html">DFT</a></li>
<li class="toctree-l1"><a class="reference internal" href="linearModels_FFTs.html">Regression and FFTs</a></li>
<li class="toctree-l1"><a class="reference internal" href="nns.html">Neural networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_regression_pytorch.html">Basic regression in pytorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="logistic_regression_pytorch.html">Logistic regression in pytorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch_regression.html">Pytorch by example</a></li>
<li class="toctree-l1"><a class="reference internal" href="convnet_classifier_pytorch.html">Convnet classifier example</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoencoder.html">Autoencoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="gan.html">GANs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">Parallelism and GPU computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="explainability.html">Explainability</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/smart-stats/ds4bio_book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/smart-stats/ds4bio_book/issues/new?title=Issue%20on%20page%20%2Fdata_cleaning.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/data_cleaning.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Data cleaning by example</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Data cleaning by example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports-and-files">Imports and files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-data-in-with-pandas">Reading data in with pandas</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-the-data">Working with the data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">Plotting</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><a href="https://colab.research.google.com/github/smart-stats/ds4bio_book/blob/main/book/data_cleaning.ipynb" target="_parent"><img src="https://colab.research.google.com/assets/colab-badge.svg" alt="Open In Colab"/></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="data-cleaning-by-example">
<h1>Data cleaning by example<a class="headerlink" href="#data-cleaning-by-example" title="Permalink to this heading">#</a></h1>
<p>We’re going to cover data cleaning by an example. Primarily, you’re going to work in <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, a library for manipulating tabular data.</p>
<section id="imports-and-files">
<h2>Imports and files<a class="headerlink" href="#imports-and-files" title="Permalink to this heading">#</a></h2>
<p>The first thing we’ll try is loading some data and plotting it. To do this, we’ll need some packages. Let’s load up pandas, a package for data management, and matplotlib. The python command for this is <code class="docutils literal notranslate"><span class="pre">import</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="reading-data-in-with-pandas">
<h2>Reading data in with pandas<a class="headerlink" href="#reading-data-in-with-pandas" title="Permalink to this heading">#</a></h2>
<p>Let’s now read in an MRICloud dataset using pandas. We want to use the function <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> within pandas. Notice we imported pandas <code class="docutils literal notranslate"><span class="pre">as</span> <span class="pre">pd</span></code> so the command is <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code>. Also, pandas can accept URLs, so we just put the link to the file in the argument. The data we want to read in is in a github repo I created.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;https://raw.githubusercontent.com/bcaffo/ds4bme_intro/master/data/kirby127a_3_1_ax_283Labels_M2_corrected_stats.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s look at the first 4 rows of our dataframe. The object <code class="docutils literal notranslate"><span class="pre">dataset</span></code> is a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> object with associated methods. One is <code class="docutils literal notranslate"><span class="pre">head</span></code> which allows one to see the first few rows of data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>rawid</th>
      <th>roi</th>
      <th>volume</th>
      <th>min</th>
      <th>max</th>
      <th>mean</th>
      <th>std</th>
      <th>type</th>
      <th>level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>kirby127a_3_1_ax.img</td>
      <td>Telencephalon_L</td>
      <td>531111</td>
      <td>0</td>
      <td>374</td>
      <td>128.3013</td>
      <td>51.8593</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>kirby127a_3_1_ax.img</td>
      <td>Telencephalon_R</td>
      <td>543404</td>
      <td>0</td>
      <td>300</td>
      <td>135.0683</td>
      <td>53.6471</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>kirby127a_3_1_ax.img</td>
      <td>Diencephalon_L</td>
      <td>9683</td>
      <td>15</td>
      <td>295</td>
      <td>193.5488</td>
      <td>32.2733</td>
      <td>1</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>kirby127a_3_1_ax.img</td>
      <td>Diencephalon_R</td>
      <td>9678</td>
      <td>10</td>
      <td>335</td>
      <td>193.7051</td>
      <td>32.7869</td>
      <td>1</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="working-with-the-data">
<h1>Working with the data<a class="headerlink" href="#working-with-the-data" title="Permalink to this heading">#</a></h1>
<p>Let’s get rid of the column <code class="docutils literal notranslate"><span class="pre">rawid</span></code> and the unnamed column since they’re kind of useless for today’s lecture. Also let’s work with only the volume.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;Unnamed: 0&#39;</span><span class="p">,</span> <span class="s1">&#39;rawid&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">],</span>\
             <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Now let’s create a column called <code class="docutils literal notranslate"><span class="pre">icv</span></code> for intra-cranial volume. ICV is defined as the summ of the Type I Level 1 structures and cerebrospinal fluid. For the rest of this lecture, we’re just going to look at this type and level.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">## Extract the Type 1 Level 1 data</span>
<span class="n">t1l1</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1">## Create a new column based on ICV</span>
<span class="n">t1l1</span><span class="p">[</span><span class="s1">&#39;icv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">t1l1</span><span class="o">.</span><span class="n">volume</span><span class="p">)</span>
<span class="n">t1l1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>roi</th>
      <th>volume</th>
      <th>type</th>
      <th>level</th>
      <th>icv</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Telencephalon_L</td>
      <td>531111</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Telencephalon_R</td>
      <td>543404</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Diencephalon_L</td>
      <td>9683</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Diencephalon_R</td>
      <td>9678</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mesencephalon</td>
      <td>10268</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Metencephalon</td>
      <td>159402</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Myelencephalon</td>
      <td>4973</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
    <tr>
      <th>7</th>
      <td>CSF</td>
      <td>109776</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>One can access variables with methods, like <code class="docutils literal notranslate"><span class="pre">df.type</span></code>, or using brackets like df[‘type’]. I prefer the latter, since it can accomodate things like spaces in the varible name.
In addition to defining new varibles using brackets, one can use <code class="docutils literal notranslate"><span class="pre">assign</span></code>. The <code class="docutils literal notranslate"><span class="pre">.copy()</span></code> command is used because I want a new dataframe, not just referencing the slices of the other.</p>
<p>Now the TBV is defined as the sum of the volume for all rows except CSF.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t1l1</span> <span class="o">=</span> <span class="n">t1l1</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">tbv</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">t1l1</span><span class="o">.</span><span class="n">volume</span><span class="p">[(</span><span class="n">t1l1</span><span class="o">.</span><span class="n">roi</span> <span class="o">!=</span> <span class="s1">&#39;CSF&#39;</span><span class="p">)]))</span>
<span class="n">t1l1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>roi</th>
      <th>volume</th>
      <th>type</th>
      <th>level</th>
      <th>icv</th>
      <th>tbv</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Telencephalon_L</td>
      <td>531111</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Telencephalon_R</td>
      <td>543404</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Diencephalon_L</td>
      <td>9683</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Diencephalon_R</td>
      <td>9678</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mesencephalon</td>
      <td>10268</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Metencephalon</td>
      <td>159402</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Myelencephalon</td>
      <td>4973</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
    <tr>
      <th>7</th>
      <td>CSF</td>
      <td>109776</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s look at brain composition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t1l1</span><span class="p">[</span><span class="s1">&#39;comp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">t1l1</span><span class="p">[</span><span class="s1">&#39;volume&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">t1l1</span><span class="p">[</span><span class="s1">&#39;tbv&#39;</span><span class="p">]</span>
<span class="n">t1l1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>roi</th>
      <th>volume</th>
      <th>type</th>
      <th>level</th>
      <th>icv</th>
      <th>tbv</th>
      <th>comp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Telencephalon_L</td>
      <td>531111</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.418686</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Telencephalon_R</td>
      <td>543404</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.428377</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Diencephalon_L</td>
      <td>9683</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.007633</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Diencephalon_R</td>
      <td>9678</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.007629</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Mesencephalon</td>
      <td>10268</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.008094</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Metencephalon</td>
      <td>159402</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.125660</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Myelencephalon</td>
      <td>4973</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.003920</td>
    </tr>
    <tr>
      <th>7</th>
      <td>CSF</td>
      <td>109776</td>
      <td>1</td>
      <td>1</td>
      <td>1378295</td>
      <td>1268519</td>
      <td>0.086539</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="plotting">
<h1>Plotting<a class="headerlink" href="#plotting" title="Permalink to this heading">#</a></h1>
<p>Pandas has built in methods for plotting. Later on, we’ll try different plotting packages.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t1l1</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;roi&#39;</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;comp&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;AxesSubplot:xlabel=&#39;roi&#39;&gt;
</pre></div>
</div>
<img alt="_images/b3378175296247a0f8f48fa1cd1f1c109fb0f36b2316c75fb2abf429b59eda32.png" src="_images/b3378175296247a0f8f48fa1cd1f1c109fb0f36b2316c75fb2abf429b59eda32.png" />
</div>
</div>
<p>In colab, you have to install packages it doesn’t have everytime you reconnect the runtime. I’ve commented this out here, since plotly is already installed locally for me. To install in colab, use a <code class="docutils literal notranslate"><span class="pre">!</span></code> in front of the unix command. In this case we’re using the python package management system <code class="docutils literal notranslate"><span class="pre">pip</span></code> to install plotly, an interactive graphing envinronment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!pip install plotly</span>
</pre></div>
</div>
</div>
</div>
<p>We can create an interactive plot with <code class="docutils literal notranslate"><span class="pre">plotly</span></code>. This is a professionally developed package that makes interactive plotting very easy. Also, it renders nicely within colab or jupyter notebooks. For plotly graphics, I would suggest assigning the graph to a variable then calling that variable to show the plot. This way you can modify the plot later if you’d like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">plotly.express</span> <span class="k">as</span> <span class="nn">px</span>
<span class="n">myplot</span> <span class="o">=</span> <span class="n">px</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">t1l1</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;roi&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;volume&#39;</span><span class="p">)</span>
<span class="n">myplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="virtual_environments.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Virtual Environments</p>
      </div>
    </a>
    <a class="right-next"
       href="EDA.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Exploratory data analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Data cleaning by example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#imports-and-files">Imports and files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-data-in-with-pandas">Reading data in with pandas</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-the-data">Working with the data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">Plotting</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Brian Caffo
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=bd9e20870c6007c4c509"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=bd9e20870c6007c4c509"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>